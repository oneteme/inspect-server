server:
  port: 9001
  compression:
    enabled: true
    mime-types: application/json
    min-response-size: 1MB
spring:
  application:
    name: inspect
  datasource:
    url: jdbc:h2:mem:testdb;DATABASE_TO_LOWER=TRUE;
    username: sa
    password:
    driver-class-name: org.h2.Driver
    hikari:
      minimum-idle: 1
      maximum-pool-size: 5
  sql:
    init:
      mode: always
      schema-locations: classpath:schema.sql
     # data-locations: classpath:data-h2.sql
  h2:
    console:
      enabled: true
      path: /h2

#  flyway:
#    table: flyw_hist
#    url: jdbc:h2:mem:testdb;DATABASE_TO_LOWER=TRUE;
#    user: sa
#    password:
#    mixed: true
#    enabled: true #true

logging:
  level:
    org.usf.jquery: DEBUG
    org.usf.inspect: trace
    org.springframework.jdbc.core: DEBUG

inspect:
  collector: 
    enabled: true #default=false, enables the collector
    debug-mode: true #default=false, enables collector debug mode
    scheduling:
      interval: 15s #default=60s, interval between trace dispatches
    monitoring:
      http-route:
        excludes:
          method: OPTIONS #default=[], exclude OPTIONS requests
          path: /favicon.ico #default=[], exclude matching request paths
      resources: #memory, cpu, storage, ... 
        enabled: true
        disk: "c:/"
      exception:
        max-stack-trace-rows: -1
        max-cause-depth: -1
        #class-name-pattern: fr.enedis.nova.*
    tracing:
      queue-capacity: 1000 #default=10000, queue capacity for trace dispatching
      delay-if-pending: 10 #default=30, delay in seconds before dispatch trace if processing is still pending
      dump:
        enabled: false
        #location: c:/dev #default=/tmp
      remote:
        mode: REST #default=null, trace dispatch type (e.g., REST)
        host: http://localhost:9001 #default=localhost, target dispatch host
        retention-max-age: 10d #default=30d, maximum age of traces in days
  server:
    scheduling:
      interval: 30s #default=60s, interval between trace dispatches
    tracing:
      queue-capacity: 1000000 #default=10000, queue capacity for trace dispatching
      delay-if-pending: 0
      dump:
        enabled: false
    partition:
      enabled: true
      schedule: "0 0 0 L * ?"
      http-session: DAY
      http-request: DAY
      jdbc-request: DAY
    purge:
      enabled: false


